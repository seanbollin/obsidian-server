sudo: required
dist: trusty

env:
  - ANSIBLE_HOST_KEY_CHECKING=False

notifications:
  email: false

before_install:
  - openssl aes-256-cbc -K $encrypted_84a53e325742_key -iv $encrypted_84a53e325742_iv -in ansible/deploy-key.enc -out ansible/deploy-key -d
  - sudo apt-add-repository ppa:ansible/ansible -y
  - sudo apt-get -qq update
  - sudo apt-get install software-properties-common
  - sudo apt-get install ansible
  - sudo apt-get install libboost-all-dev

language: cpp

compiler:
  - clang

script:
  - make

after_success:
  - chmod 600 ansible/deploy-key
  - ansible-playbook ansible/deploy.yml -i ansible/hosts --private-key ansible/deploy-key
